---
Name: app-internal
After:
  - '#coreroutes'
Only:
  envvarset: SS_BYPASS_BUILD_DATABASE
---
SilverStripe\Core\Injector\Injector:
  ZeroDatabase:
    class: App\Internal\ZeroDatabase
    properties:
      connector: '%$App\Internal\ZeroConnector'
      schemaManager: '%$App\Internal\ZeroSchemaManager'
  DevRequestFilter:
    class: SilverStripe\Control\Middleware\RequestHandlerMiddlewareAdapter
    properties:
      RequestHandler: '%$SilverStripe\Dev\DevBuildController'
      Middlewares:
        AdminRequestFilterMiddleware: '%$App\Internal\DevRequestFilterMiddleware'

SilverStripe\Control\Director:
  rules:
    dev:
      Controller: '%$DevRequestFilter'
